<div class='qrgenerator' ng-controller='qrgeneratorCtrl'>
  <script>
    function clickHandler(e) {
      var button = e.target;
      while (!button.hasAttribute('data-dialog') && button !== document.body) {
        button = button.parentElement;
      }
      if (!button.hasAttribute('data-dialog')) {
        return;
      }
      var id = button.getAttribute('data-dialog');
      var dialog = document.getElementById(id);
      if (dialog) {
        dialog.open();
      }
    }
  </script>
  <paper-card heading="Client Id" ng-if='qrgenerator.modulescope.static' class="pink">
    <div class="card-content">
      <qr-code data="{{qrgenerator.modulescope.static}}"></qr-code>
    </div>
  </paper-card>
  <div class="list" role="list" onclick="clickHandler(event)">
    <template is="dom-repeat" items="{{qrgenerator.list}}">
        <paper-icon-item>
            <div style$="{{item.style}}" class='avatar' item-icon></div>
          <paper-item-body two-line>
            <div>{{item.promocion}}</div>
            <div secondary>{{item.description}}</div>
          </paper-item-body>
          <paper-icon-button data-dialog$="{{item.id}}" icon="arrow-forward" alt="Open promotion"></paper-icon-button>
        </paper-icon-item>
        <paper-dialog id="{{item.id}}" modal>
          <qr-code modulesize='6' data="{{item.valor}}"></qr-code>
          <div class="buttons">
            <paper-button dialog-confirm autofocus>Close me</paper-button>
          </div>
        </paper-dialog>
    </template>
  </div>
</div>
