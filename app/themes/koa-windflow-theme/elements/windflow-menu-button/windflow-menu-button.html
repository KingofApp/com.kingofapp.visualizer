<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../../bower_components/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html">
<link rel="import" href="../../../../bower_components/iron-behaviors/iron-control-state.html">

<!--
### Styling

Custom property | Description | Default
----------------|-------------|--------
`--menu-button-dropdown-background` | Background color of the menu-button dropdown | `#fff`
`--menu-button` | Mixin applied to the menu-button | `{}`
`--menu-button-disabled` | Mixin applied to the menu-button when disabled | `{}`
`--menu-button-dropdown` | Mixin applied to the menu-button dropdown | `{}`
-->

<dom-module id="windflow-menu-button">
    <template>
        <style>
            :host {
                --windflow-menu-button-dropdown-background: {
                    
                };
                --windflow-menu-button: {
                    
                };
                --windflow-menu-button-disabled: {
                    
                };
                --windflow-menu-button-dropdown: {
                    
                };
                display: inline-block;
                position: relative;
                padding: 8px;
                outline: none;
                @apply(--windflow-menu-button);
            }
            :host([disabled]) {
                cursor: auto;
                color: var(--disabled-text-color);
                @apply(--windflow-menu-button-disabled);
            }
            
            windflow-icon-button {
                background-color: #303f9f;
            }
            
            .dropdown-content {
                border-radius: 2px;
                background-color: var(--windflow-menu-button-dropdown-background, --primary-background-color);
                @apply(--windflow-menu-button-content);
                display: none;
                position: absolute;
                top: 0;
            }
            
            :host([opened]) .dropdown-content {
                display: block;
            }
        </style>

        <div id="trigger" on-tap="open">
          <content select=".dropdown-trigger"></content>
        </div>
          <div class="dropdown-content">
            <content id="content" select=".dropdown-content"></content>
          </div>
    </template>
    <script src="../jquery/jquery-2.1.4.min.js"></script>

    <script>
        Polymer({
            is: 'windflow-menu-button',

            behaviors: [
                Polymer.IronControlState,
                Polymer.IronA11yKeysBehavior
            ],
            
            listeners: {
                'tap': 'toggle',
            },

            properties: {
                /**
                * True if the content is currently displayed.
                */
                opened: {
                    type: Boolean,
                    value: false,
                    notify: true,
                    reflectToAttribute: true
                },
                
                pressed: {
                    type: Boolean,
                    value: false,
                    notify: true
                }
            },

            /**
            * Hide the dropdown content.
            */
            close: function() {
                this.$.dropdown.close();
            },

            /**
            * Make the dropdown content appear as an overlay positioned relative to
            * the dropdown trigger.
            */
            open: function() {
            },
            
            toggle: function() {
                if (!this.disabled) {
                    this.opened = !this.opened; 
                }
            }
        });
    </script>
</dom-module>
