<dom-module id="koa-carousel">
  <template>
    <style>
      :host {
        display: block;
        height: 100%;
      }

      :host img.img-fluid {
        width: inherit!important;
        height: 100%;
      }
    </style>
    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
      <div class="carousel-inner" role="listbox">
        <template is="dom-if" if="[[items]]">
          <template is="dom-repeat" items="[[items]]" index-as="index">
            <div class$="[[_isActive(index)]]">
              <img class="d-block img-fluid" src$="[[item]]">
            </div>
          </template>
        </template>
      </div>
      <template is="dom-if" if="[[controls]]">
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </template>
    </div>
  </template>
  <script>
    Polymer({
      is: 'koa-carousel',
      properties: {
        items: {
          type: Array,
          value: []
        },
        controls: {
          type: Boolean,
          value: false
        }
      },
      ready: function() {
        if(Polymer.dom(this).node.getAttribute('items') !== null) this.items = Polymer.dom(this).node.getAttribute('items').split(',');
        if(Polymer.dom(this).node.getAttribute('controls') !== null) this.controls = true;
      },

      attributeChanged: function(name, type) {
        if(name === 'items') this.items = this.getAttribute(name);
        this.items = this.items.split(',');
      },

      _isActive: function(index) {
        if(index === 0){
          return 'carousel-item active';
        }else {
          return 'carousel-item';
        }
      }
    });
  </script>
</dom-module>
